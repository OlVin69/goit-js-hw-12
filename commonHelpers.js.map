{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport axios from \"axios\";\n\n\nconst formEl = document.querySelector(\".js-search-form\");\nconst loader = document.querySelector(\".loader\");\nconst listEl = document.querySelector(\".js-gallery\");\nconst btnMore = document.querySelector(\".js-loadmore\");\n\nlet page = 1;\nlet query = \"\";\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nformEl.addEventListener(\"submit\", onSubmit);\n\nbtnMore.addEventListener(\"click\", loadMoreData);\n\nasync function onSubmit(event) {\n  event.preventDefault();\n\n  const query = event.target.elements[\"search_field\"].value.trim();\n  \n  loaderPlay();\n\n  if (!query) {\n    loaderStop();\n    listEl.innerHTML = \"\";\n    return iziToast.info({\n      messageColor: 'rgb(255, 255, 255)',\n      backgroundColor: 'blue',\n      timeout: '5000',\n      message: \"Please fill out search field\",\n      position: 'center',\n    });\n  };\n\n  listEl.innerHTML = \"\";\n\n  try {\n    const { data: { hits, totalHits } } = await getPhotos(query, page);\n    if (hits.length > 0) {\n     listEl.innerHTML = renderGallery(hits);\n      lightbox.refresh();\n      \n      btnMore.classList.remove(\"is-hidden\");\n\n    if (page * 40 >= totalHits) {\n      btnMore.classList.add(\"is-hidden\");\n      iziToast.info({\n      messageColor: 'rgb(255, 255, 255)',\n      backgroundColor: 'blue',\n      timeout: '6000',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'bottomCenter',\n    });\n    }\n    } else {\n      iziToast.error({\n                        messageColor: \"rgb(255, 255, 255)\",\n                        backgroundColor: \"red\",\n                        timeout:\"3000\",\n                        message: \"Sorry, there are no images matching your search query. Please try again.\",\n                        position: \"center\",\n                });\n   }\n\n  } catch (error) {\n    console.error(error.message);\n  }\n  finally { loaderStop(); }; \n\n  event.target.reset();\n};\n\nfunction getPhotos(query, page) {\n\n  const API_KEY = \"41700733-d920d8ba94f63c82daa7e2416\";\n  axios.defaults.baseURL = \"https://pixabay.com/api/\";\n  \n  return axios.get(\"\", {\n    params: {\n      key: API_KEY,\n      q: query,\n      page,\n      per_page: 40,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n    },\n  });\n};\n\n  function renderGallery(arr) {\n  return arr.map(( image) => {\n      const { webformatURL, largeImageURL, tags, likes, views, comments, downloads,  } = image;\n\n       return `\n        <li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" \" >\n          </a>\n          <div class=\"gallery-item-info\">\n            <div>\n            <p><b>Likes</b></p>\n            <p>${likes}</p>\n            </div>\n            <div>\n            <p><b>Views</b></p>\n            <p>${views}</p>\n            </div>\n            <div>\n            <p><b>Comments</b></p>\n            <p>${comments}</p>\n            </div>\n            <div>\n            <p><b>Downloads</b></p>\n            <p>${downloads}</p>\n            </div>\n          </div>\n        </li>\n      `;\n    }).join(\"\");\n};\n\nasync function loadMoreData() {\n  page += 1;\n  \n  loaderPlay();\n  try {\n    const { data: { hits, totalHits } } = await getPhotos(query, page);\n\n      listEl.insertAdjacentHTML('beforeend', renderGallery(hits));\n      lightbox.refresh();\n      \n      btnMore.classList.remove(\"is-hidden\");\n\n    if (page * 40 >= totalHits) {\n        \n        btnMore.classList.add(\"is-hidden\");\n\n        iziToast.info({\n      messageColor: 'rgb(255, 255, 255)',\n      backgroundColor: 'blue',\n      timeout: '6000',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'bottomCenter',\n    });\n    };\n  } catch (error) {\n    console.error(error.message);\n  }\n   finally { loaderStop() };  \n};\n  \n\nfunction loaderPlay() {\n  loader.classList.remove(\"hidden\");\n};\n\nfunction loaderStop() {\n  loader.classList.add(\"hidden\");\n};\n\n\n    \n  "],"names":["formEl","loader","listEl","btnMore","page","query","lightbox","SimpleLightbox","onSubmit","loadMoreData","event","loaderPlay","loaderStop","iziToast","hits","totalHits","getPhotos","renderGallery","error","API_KEY","axios","arr","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"owBAQA,MAAMA,EAAS,SAAS,cAAc,iBAAiB,EACjDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAU,SAAS,cAAc,cAAc,EAErD,IAAIC,EAAO,EACPC,EAAQ,GAGZ,MAAMC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,KAChB,CAAC,EAEDP,EAAO,iBAAiB,SAAUQ,CAAQ,EAE1CL,EAAQ,iBAAiB,QAASM,CAAY,EAE9C,eAAeD,EAASE,EAAO,CAC7BA,EAAM,eAAc,EAEpB,MAAML,EAAQK,EAAM,OAAO,SAAS,aAAgB,MAAM,OAI1D,GAFAC,IAEI,CAACN,EACH,OAAAO,IACAV,EAAO,UAAY,GACZW,EAAS,KAAK,CACnB,aAAc,qBACd,gBAAiB,OACjB,QAAS,OACT,QAAS,+BACT,SAAU,QAChB,CAAK,EAGHX,EAAO,UAAY,GAEnB,GAAI,CACF,KAAM,CAAE,KAAM,CAAE,KAAAY,EAAM,UAAAC,CAAS,CAAI,EAAG,MAAMC,EAAUX,EAAOD,CAAI,EAC7DU,EAAK,OAAS,GACjBZ,EAAO,UAAYe,EAAcH,CAAI,EACpCR,EAAS,QAAO,EAEhBH,EAAQ,UAAU,OAAO,WAAW,EAElCC,EAAO,IAAMW,IACfZ,EAAQ,UAAU,IAAI,WAAW,EACjCU,EAAS,KAAK,CACd,aAAc,qBACd,gBAAiB,OACjB,QAAS,OACT,QAAS,6DACT,SAAU,cAChB,CAAK,IAGCA,EAAS,MAAM,CACG,aAAc,qBACd,gBAAiB,MACjB,QAAQ,OACR,QAAS,2EACT,SAAU,QAClC,CAAiB,CAGd,OAAQK,EAAP,CACA,QAAQ,MAAMA,EAAM,OAAO,CAC5B,QACH,CAAYN,EAAY,CACxB,CACEF,EAAM,OAAO,OACf,CAEA,SAASM,EAAUX,EAAOD,EAAM,CAE9B,MAAMe,EAAU,qCAChB,OAAAC,EAAM,SAAS,QAAU,2BAElBA,EAAM,IAAI,GAAI,CACnB,OAAQ,CACN,IAAKD,EACL,EAAGd,EACH,KAAAD,EACA,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACL,CAAG,CACH,CAEE,SAASa,EAAcI,EAAK,CAC5B,OAAOA,EAAI,IAAMC,GAAU,CACvB,KAAM,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAa,EAAGP,EAElF,MAAO;AAAA;AAAA,qBAEOE;AAAA,wBACGD,WAAsBE;AAAA;AAAA;AAAA;AAAA;AAAA,iBAK7BC;AAAA;AAAA;AAAA;AAAA,iBAIAC;AAAA;AAAA;AAAA;AAAA,iBAIAC;AAAA;AAAA;AAAA;AAAA,iBAIAC;AAAA;AAAA;AAAA;AAAA,OAKjB,CAAK,EAAE,KAAK,EAAE,CACd,CAEA,eAAepB,GAAe,CAC5BL,GAAQ,EAERO,IACA,GAAI,CACF,KAAM,CAAE,KAAM,CAAE,KAAAG,EAAM,UAAAC,CAAS,CAAI,EAAG,MAAMC,EAAUX,EAAOD,CAAI,EAE/DF,EAAO,mBAAmB,YAAae,EAAcH,CAAI,CAAC,EAC1DR,EAAS,QAAO,EAEhBH,EAAQ,UAAU,OAAO,WAAW,EAElCC,EAAO,IAAMW,IAEbZ,EAAQ,UAAU,IAAI,WAAW,EAEjCU,EAAS,KAAK,CAChB,aAAc,qBACd,gBAAiB,OACjB,QAAS,OACT,QAAS,6DACT,SAAU,cAChB,CAAK,EAEF,OAAQK,EAAP,CACA,QAAQ,MAAMA,EAAM,OAAO,CAC5B,QACH,CAAaN,EAAY,CAAA,CACzB,CAGA,SAASD,GAAa,CACpBV,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEA,SAASW,GAAa,CACpBX,EAAO,UAAU,IAAI,QAAQ,CAC/B"}