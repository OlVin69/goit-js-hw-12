{"version":3,"file":"commonHelpers.js","sources":["../src/js/apiphoto.js","../src/js/render.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n  export function getPhotos(query, page) {\n\n  const API_KEY = \"41700733-d920d8ba94f63c82daa7e2416\";\n  axios.defaults.baseURL = \"https://pixabay.com/api/\";\n  \n  return axios.get(\"\", {\n    params: {\n      key: API_KEY,\n      q: query,\n      page,\n      per_page: 40,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: true,\n    },\n  });\n};","export function renderGallery(arr) {\n  return arr.map(( image) => {\n      const { webformatURL, largeImageURL, tags, likes, views, comments, downloads,  } = image;\n\n       return `\n        <li class=\"gallery-item\">\n          <a href=\"${largeImageURL}\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\"  >\n          </a>\n          <div class=\"gallery-item-info\">\n            <div class=\"info\">\n            <p><b>Likes</b></p>\n            <p>${likes}</p>\n            </div>\n            <div class=\"info\">\n            <p><b>Views</b></p>\n            <p>${views}</p>\n            </div>\n            <div class=\"info\">\n            <p><b>Comments</b></p>\n            <p>${comments}</p>\n            </div>\n            <div class=\"info\">\n            <p><b>Downloads</b></p>\n            <p>${downloads}</p>\n            </div>\n          </div>\n        </li>\n      `;\n    }).join(\"\");\n};","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { getPhotos } from \"./js/apiphoto\";\nimport { renderGallery } from \"./js/render\";\nimport { scrollGallery } from \"./js/scroll\";\n\nconst formEl = document.querySelector(\".js-search-form\");\nconst loader = document.querySelector(\".loader\");\nconst listEl = document.querySelector(\".js-gallery\");\nconst btnMore = document.querySelector(\".js-loadmore\");\nconst target = document.querySelector('.js-backdrop');\n\nlet page = 1;\nlet query = \"\";\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nformEl.addEventListener(\"submit\", onSubmit);\n\nbtnMore.addEventListener(\"click\", loadMoreData);\n\nasync function onSubmit(event) {\n  event.preventDefault();\n  listEl.innerHTML = \"\";\n  btnMore.classList.add(\"is-hidden\");\n\n  page = 1;\n  query = event.target.elements[\"search_field\"].value.trim();\n  \n  loaderPlay();\n\n  if (!query) {\n    loaderStop();\n    listEl.innerHTML = \"\";\n    btnMore.classList.add(\"is-hidden\");\n    return iziToast.info({\n      messageColor: 'rgb(255, 255, 255)',\n      backgroundColor: 'blue',\n      timeout: '5000',\n      message: \"Please fill out search field\",\n      position: 'center',\n    });\n  };\n\n  \n\n  try {\n    const { data: { hits, totalHits } } = await getPhotos(query, page);\n    if (hits.length > 0) {\n     listEl.innerHTML = renderGallery(hits);\n      lightbox.refresh();\n      \n      btnMore.classList.remove(\"is-hidden\");\n\n    if (page * 40 >= totalHits) {\n      btnMore.classList.add(\"is-hidden\");\n      iziToast.info({\n      messageColor: 'rgb(255, 255, 255)',\n      backgroundColor: 'blue',\n      timeout: '5000',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'bottomCenter',\n    });\n    }\n    } else {\n      btnMore.classList.add(\"is-hidden\");\n      iziToast.error({\n                        messageColor: \"rgb(255, 255, 255)\",\n                        backgroundColor: \"red\",\n                        timeout:\"5000\",\n                        message: \"Sorry, there are no images matching your search query. Please try again.\",\n                        position: \"center\",\n                });\n   }\n\n  } catch (error) {\n    iziToast.error({   title: Error,\n                        messageColor: \"rgb(255, 255, 255)\",\n                        backgroundColor: \"red\",\n                        timeout:\"3000\",\n                        position: \"topRight\",\n                });\n  }\n  finally { loaderStop(); }; \n\n  event.target.reset();\n};\n\nasync function loadMoreData() {\n  page += 1;\n  \n  loaderPlay();\n  try {\n    const { data: { hits, totalHits } } = await getPhotos(query, page);\n\n      listEl.insertAdjacentHTML('beforeend', renderGallery(hits));\n      lightbox.refresh();\n      \n      btnMore.classList.remove(\"is-hidden\");\n\n    if (page * 40 >= totalHits) {\n        \n        btnMore.classList.add(\"is-hidden\");\n\n        iziToast.info({\n      messageColor: 'rgb(255, 255, 255)',\n      backgroundColor: 'red',\n      timeout: '6000',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'bottomCenter',\n    });\n    };\n  } catch (error) {\n    iziToast.error({   title: Error,\n                        messageColor: \"rgb(255, 255, 255)\",\n                        backgroundColor: \"red\",\n                        timeout:\"3000\",\n                        position: \"topRight\",\n                });\n  }\n   finally { loaderStop() };  \n};\n\nfunction loaderPlay() {\n  loader.classList.remove(\"hidden\");\n  target.classList.remove('is-hidden');\n};\n\nfunction loaderStop() {\n  loader.classList.add(\"hidden\");\n  target.classList.add('is-hidden');\n};\n\n\n\n\n  "],"names":["getPhotos","query","page","API_KEY","axios","renderGallery","arr","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formEl","loader","listEl","btnMore","target","lightbox","SimpleLightbox","onSubmit","loadMoreData","event","loaderPlay","loaderStop","iziToast","hits","totalHits"],"mappings":"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"}